<mat-card class="chart-card">
  <mat-card-header>
    <mat-card-title>{{ title }}</mat-card-title>
  </mat-card-header>

  <mat-card-content class="donut-content">
    <svg viewBox="0 0 200 200" class="donut-svg">
      <g transform="translate(100,100)">

        <!-- EMPTY STATE -->
        <ng-container *ngIf="segments.length === 0; else donut">
          <text
            x="0"
            y="4"
            text-anchor="middle"
            font-size="12"
            fill="#999">
            No data
          </text>
        </ng-container>

        <!-- DONUT -->
        <ng-template #donut>
          <ng-container *ngFor="let seg of segments">
            <path [attr.d]="seg.path" [attr.fill]="seg.color"></path>
          </ng-container>

          <!-- hole -->
          <circle r="36" fill="#f7f7f7"></circle>

          <!-- total -->
          <text
            *ngIf="total > 0"
            x="0"
            y="4"
            text-anchor="middle"
            font-size="14"
            font-weight="700"
            fill="#333">
            {{ total }}
          </text>
        </ng-template>

      </g>
    </svg>

    <!-- LEGEND -->
    <div class="legend" *ngIf="segments.length">
      <div class="item" *ngFor="let seg of segments">
        <span class="swatch" [style.background]="seg.color"></span>
        <span class="lbl">{{ seg.label }} ({{ seg.value }})</span>
      </div>
    </div>
  </mat-card-content>
</mat-card>

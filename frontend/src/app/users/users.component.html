<div class="users-page">
    <div class="search-section">
        <mat-form-field appearance="outline" class="search-field">
            <mat-label>Search users by name or username</mat-label>
            <input matInput [formControl]="searchControl" placeholder="e.g., john doe or johndoe" type="search">
            <button mat-icon-button matSuffix (click)="clearSearch()" *ngIf="searchControl.value">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>
    </div>

    <div class="results-section" *ngIf="loading || users.length || noResults">
        <mat-spinner diameter="24" *ngIf="loading"></mat-spinner>

        <div *ngIf="noResults && !loading" class="no-results">
            <mat-icon>search_off</mat-icon>
            <p>No users found matching "{{ searchControl.value }}"</p>
        </div>

        <div class="users-grid" *ngIf="!loading && users.length">
            <mat-card *ngFor="let user of users" class="user-card" routerLink="/profile/{{ user.username }}">
                <mat-card-header>
                    <img mat-card-avatar [src]="getAvatar(user)" (error)="onImgError($event)"
                        alt="{{ user.name || user.username }}" />

                    <mat-card-title>{{ user.name || user.username }}</mat-card-title>
                    <mat-card-subtitle>@{{ user.username }}</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <p *ngIf="user.bio" class="bio">{{ user.bio }}</p>
                    <div class="stats">
                        <span>{{ user.subscribersCount }} followers</span>
                        <span>{{ user.subscriptionsCount || 0 }} following</span>
                    </div>
                </mat-card-content>

            </mat-card>
        </div>
    </div>
</div>